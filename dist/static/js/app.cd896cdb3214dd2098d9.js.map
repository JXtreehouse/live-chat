{"version":3,"sources":["webpack:///static/js/app.cd896cdb3214dd2098d9.js","webpack:///./src/frontend/js/store.js","webpack:///./src/frontend/js/util.js","webpack:///./src/frontend/app.vue?0bea","webpack:///./src/frontend/components/card.vue?48ee","webpack:///./src/frontend/components/list.vue?c945","webpack:///./src/frontend/components/loginPanel.vue?8a08","webpack:///./src/frontend/components/message.vue?b64a","webpack:///./src/frontend/components/textBox.vue?6613","webpack:///./src/frontend/components/userListPanel.vue","webpack:///./src/frontend/components/message.vue?8988","webpack:///./src/frontend/components/textBox.vue?9d84","webpack:///./src/frontend/components/card.vue?8775","webpack:///./src/frontend/components/loginPanel.vue?c229","webpack:///./src/frontend/components/userListPanel.vue?f407","webpack:///./src/frontend/components/list.vue?cd31","webpack:///./src/frontend/app.vue?a289","webpack:///app.vue","webpack:///card.vue","webpack:///list.vue","webpack:///loginPanel.vue","webpack:///message.vue","webpack:///textBox.vue","webpack:///userListPanel.vue","webpack:///./src/frontend/js/client.js","webpack:///./src/frontend/main.js"],"names":["webpackJsonp","module","__webpack_exports__","__webpack_require__","connect","state","client","__WEBPACK_IMPORTED_MODULE_2__client__","host","port","alert","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vuex__","__WEBPACK_IMPORTED_MODULE_3__util__","use","store","Store","users","me","sessions","currentSession","filterKey","getters","_ref","_ref2","onlineUsers","_ref3","myLoginName","filter","user","loginName","_ref4","_ref5","_ref6","session","toUpperCase","includes","_ref7","mutations","initSessions","userMapNotRead","forEach","messages","msg","read","count","index","indexOf","notReadMsgCount","splice","setCurrentSession","exitSession","i","push","notRead","find","initUsers","refreshUser","oldUser","setFilterKey","value","logout","actions","register","_ref8","payload","login","_ref9","sendMsg","_ref10","content","msgId","message","id","from","to","self","date","Date","findSession","__WEBPACK_IMPORTED_MODULE_2__store__","length","findUser","copyProperties","target","source","console","error","key","cache","valueStr","window","localStorage","getItem","JSON","parse","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","setItem","guid","replace","c","r","Math","random","toString","d","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__","exports","injectStyle","ssrContext","Component","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","staticClass","_l","item","_v","_s","_f","class","attrs","width","height","src","img","_e","staticRenderFns","expression","disabled","placeholder","domProps","on","keyup","onKeyup","input","$event","composing","alt","type","password","click","toggleLogin","denglu","showLoginForm","confirmPassword","registerCode","zhuce","staticStyle","display","vertical-align","float","background-color","href","active","border-radius","text-align","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_1__components_card__","__WEBPACK_IMPORTED_MODULE_1__components_card___default","__WEBPACK_IMPORTED_MODULE_2__components_list__","__WEBPACK_IMPORTED_MODULE_2__components_list___default","__WEBPACK_IMPORTED_MODULE_3__components_textBox__","__WEBPACK_IMPORTED_MODULE_3__components_textBox___default","__WEBPACK_IMPORTED_MODULE_4__components_message__","__WEBPACK_IMPORTED_MODULE_4__components_message___default","__WEBPACK_IMPORTED_MODULE_5__components_loginPanel_vue__","__WEBPACK_IMPORTED_MODULE_5__components_loginPanel_vue___default","__WEBPACK_IMPORTED_MODULE_6__components_userListPanel_vue__","__WEBPACK_IMPORTED_MODULE_6__components_userListPanel_vue___default","__WEBPACK_IMPORTED_MODULE_7__js_store__","__WEBPACK_IMPORTED_MODULE_8_vuex__","components","Card","a","List","TextBox","Message","loginPanel","userListPanel","computed","mounted","onunload","socket","disconnect","methods","e","filters","truncateStr","substring","__WEBPACK_IMPORTED_MODULE_2__js_util__","data","credential","autoLogin","$store","dispatch","time","getHours","getMinutes","readFilter","alreadyRead","scroll-bottom","componentUpdated","el","scrollTop","scrollHeight","clientHeight","keyCode","registerEvent","callBack","onReceiveMsg","onDisconnect","onNotifyUserLogin","onKickOff","onReceiveRead","ChatClient","events","param","emit","code","rMsg","rData","__WEBPACK_IMPORTED_MODULE_0__store__","commit","__WEBPACK_IMPORTED_MODULE_1__util__","ss","userFrom","onlineUser","prototype","event","callback","connectUrl","io","call","__WEBPACK_IMPORTED_MODULE_1__app_vue__","__WEBPACK_IMPORTED_MODULE_1__app_vue___default","__WEBPACK_IMPORTED_MODULE_2__js_store__","__WEBPACK_IMPORTED_MODULE_3__css_reset_css__","config","devtools","template","App"],"mappings":"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","file":"static/js/app.cd896cdb3214dd2098d9.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__client__ = __webpack_require__(111);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__util__ = __webpack_require__(32);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"a\" /* default */]);\n\nfunction connect(state) {\n  state.client = new __WEBPACK_IMPORTED_MODULE_2__client__[\"a\" /* ChatClient */]({ host: '47.94.2.0', port: 80 });\n  if (!state.client.connect()) {\n    alert('连接失败');\n  }\n}\n\nvar store = new __WEBPACK_IMPORTED_MODULE_1_vuex__[\"a\" /* default */].Store({\n  state: {\n    client: null,\n    users: [],\n    me: null,\n    sessions: [],\n    currentSession: null,\n    filterKey: '' },\n  getters: {\n    client: function client(_ref) {\n      var _client = _ref.client;\n      return _client;\n    },\n    users: function users(_ref2) {\n      var _users = _ref2.users;\n      return _users;\n    },\n    onlineUsers: function onlineUsers(_ref3) {\n      var users = _ref3.users,\n          myLoginName = _ref3.myLoginName;\n      return users.filter(function (user) {\n        return user.loginName !== myLoginName;\n      });\n    },\n    me: function me(_ref4) {\n      var _me = _ref4.me;\n      return _me;\n    },\n    myLoginName: function myLoginName(_ref5) {\n      var _myLoginName = _ref5.myLoginName;\n      return _myLoginName;\n    },\n    sessions: function sessions(_ref6) {\n      var _sessions = _ref6.sessions,\n          filterKey = _ref6.filterKey;\n      return _sessions && _sessions.filter(function (session) {\n        return !filterKey || session.loginName.toUpperCase().includes(filterKey.toUpperCase());\n      });\n    },\n    currentSession: function currentSession(_ref7) {\n      var _currentSession = _ref7.currentSession;\n      return _currentSession;\n    }\n  },\n  mutations: {\n    initSessions: function initSessions(state, sessions) {\n      var userMapNotRead = {},\n          users = state.users;\n\n      sessions.forEach(function (session) {\n        session.messages.forEach(function (msg) {\n          if (!msg.read) {\n            if (!userMapNotRead[session.loginName]) {\n              userMapNotRead[session.loginName] = 0;\n            }\n            userMapNotRead[session.loginName]++;\n          }\n        });\n      });\n\n      users.forEach(function (user) {\n        var count = userMapNotRead[user.loginName];\n        var index = users.indexOf(user);\n        user.notReadMsgCount = count;\n        users.splice(index, 1, user);\n      });\n\n      state.sessions = sessions;\n    },\n    setCurrentSession: function setCurrentSession(state, session) {\n      if (!session.messages) session.messages = [];\n      var exitSession = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__util__[\"a\" /* findSession */])(session.loginName);\n      if (exitSession) {\n        state.currentSession = exitSession;\n      } else {\n        exitSession = session;\n        state.currentSession = session;\n        state.sessions.push(session);\n      }\n\n      exitSession.notRead = 0;\n\n      if (exitSession.messages[0]) {\n        state.client.read(exitSession.messages[0]);\n      }\n\n      var find = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__util__[\"b\" /* findUser */])(session.loginName);\n      if (find) {\n        var index = state.users.indexOf(find);\n        find.notReadMsgCount = 0;\n        state.users.splice(index, 1, find);\n      }\n    },\n    initUsers: function initUsers(state, user) {\n      state.me = user;\n      state.users = user.onlineUsers;\n    },\n    refreshUser: function refreshUser(state, user) {\n      var oldUser;\n      if (oldUser = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__util__[\"b\" /* findUser */])(user.loginName)) {\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__util__[\"c\" /* copyProperties */])(oldUser, user);\n        return state.users[state.users.indexOf(oldUser)] = user;\n      }\n\n      state.users.push(user);\n    },\n\n    setFilterKey: function setFilterKey(state, value) {\n      return state.filterKey = value;\n    },\n    logout: function logout(state) {\n      return state.me = null;\n    }\n  },\n  actions: {\n    register: function register(_ref8, payload) {\n      var state = _ref8.state;\n\n      connect(state);\n      state.client.register(payload);\n    },\n    login: function login(_ref9, payload) {\n      var state = _ref9.state;\n\n      connect(state);\n      state.client.login(payload);\n    },\n    sendMsg: function sendMsg(_ref10, content) {\n      var state = _ref10.state;\n\n      var msgId = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__util__[\"d\" /* guid */])(),\n          message = {\n        id: msgId,\n        from: state.me.loginName,\n        to: state.currentSession.loginName,\n        content: content,\n        self: true,\n        read: false,\n        date: new Date()\n      };\n\n      var session = {};\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__util__[\"c\" /* copyProperties */])(session, state.currentSession);\n      session.messages.push(message);\n      state.currentSession = session;\n\n\n      state.client.sendMsg({\n        id: msgId,\n        'from': state.me.loginName,\n        'to': state.currentSession.loginName,\n        content: content\n      });\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"a\"] = (store);\n\n/***/ }),\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */,\n/* 24 */,\n/* 25 */,\n/* 26 */,\n/* 27 */,\n/* 28 */,\n/* 29 */,\n/* 30 */,\n/* 31 */,\n/* 32 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return findSession; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return findUser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return copyProperties; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return cache; });\n/* unused harmony export response */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return guid; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(99);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__ = __webpack_require__(103);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__store__ = __webpack_require__(13);\n\n\n\n\nfunction findSession(loginName) {\n  var sessions = __WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */].getters.sessions;\n  for (var i = 0; i < sessions.length; i++) {\n    if (sessions[i].loginName === loginName) {\n      return sessions[i];\n    }\n  }\n}\n\nfunction findUser(loginName) {\n  var users = __WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */].getters.users;\n  for (var i = 0; i < users.length; i++) {\n    if (users[i].loginName === loginName) {\n      return users[i];\n    }\n  }\n}\n\nfunction copyProperties(target, source) {\n  if (!target || !source) {\n    return console.error('target and source must not be null');\n  }\n  for (var key in source) {\n    target[key] = source[key];\n  }\n}\n\nfunction cache(key, value) {\n  if (!value) {\n    var valueStr = window.localStorage.getItem(key);\n    return valueStr ? JSON.parse(valueStr) : null;\n  }\n\n  if ((typeof value === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default()(value)) === 'object') {\n    value = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(value);\n  }\n  window.localStorage.setItem(key, value);\n}\n\nvar response = {\n  ok: function ok(data) {\n    this.code = 1;\n    this.rData = data;\n    return this;\n  },\n  fail: function fail(msg) {\n    this.code = 0;\n    this.rMsg = msg;\n    return this;\n  }\n};\n\nfunction guid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,\n        v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n\n\n\n/***/ }),\n/* 33 */,\n/* 34 */,\n/* 35 */,\n/* 36 */,\n/* 37 */,\n/* 38 */,\n/* 39 */,\n/* 40 */,\n/* 41 */,\n/* 42 */,\n/* 43 */,\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(65)\n}\nvar Component = __webpack_require__(2)(\n  /* script */\n  __webpack_require__(104),\n  /* template */\n  __webpack_require__(58),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-b822579a\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(61)\n}\nvar Component = __webpack_require__(2)(\n  /* script */\n  __webpack_require__(105),\n  /* template */\n  __webpack_require__(54),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-59b0957b\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(64)\n}\nvar Component = __webpack_require__(2)(\n  /* script */\n  __webpack_require__(106),\n  /* template */\n  __webpack_require__(57),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-ab3957ee\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(62)\n}\nvar Component = __webpack_require__(2)(\n  /* script */\n  __webpack_require__(107),\n  /* template */\n  __webpack_require__(55),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-5ca4d274\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(59)\n}\nvar Component = __webpack_require__(2)(\n  /* script */\n  __webpack_require__(108),\n  /* template */\n  __webpack_require__(52),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-081a726c\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(60)\n}\nvar Component = __webpack_require__(2)(\n  /* script */\n  __webpack_require__(109),\n  /* template */\n  __webpack_require__(53),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-0e640443\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(63)\n}\nvar Component = __webpack_require__(2)(\n  /* script */\n  __webpack_require__(110),\n  /* template */\n  __webpack_require__(56),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-5d03e1c0\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"scroll-bottom\",\n      rawName: \"v-scroll-bottom\"\n    }],\n    staticClass: \"message\"\n  }, [(_vm.currentSession) ? _c('ul', _vm._l((_vm.currentSession.messages), function(item) {\n    return _c('li', [_c('p', {\n      staticClass: \"time\"\n    }, [_c('span', [_vm._v(_vm._s(_vm._f(\"time\")(item.date)))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"main\",\n      class: {\n        self: item.self\n      }\n    }, [_c('img', {\n      staticClass: \"avatar\",\n      attrs: {\n        \"width\": \"30\",\n        \"height\": \"30\",\n        \"src\": item.self ? _vm.me.img : _vm.currentSession.img\n      }\n    }), _vm._v(\" \"), _c('div', {\n      staticClass: \"text\"\n    }, [_vm._v(_vm._s(item.content))]), _vm._v(\" \"), (item.self) ? _c('div', {\n      staticClass: \"read-text\"\n    }, [_vm._v(_vm._s(_vm._f(\"readFilter\")(item.read)) + \" \")]) : _vm._e()])])\n  })) : _vm._e()])\n},staticRenderFns: []}\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"text\"\n  }, [_c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.content),\n      expression: \"content\"\n    }],\n    attrs: {\n      \"disabled\": !_vm.currentSession,\n      \"placeholder\": \"按 Enter 发送\"\n    },\n    domProps: {\n      \"value\": (_vm.content)\n    },\n    on: {\n      \"keyup\": _vm.onKeyup,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.content = $event.target.value\n      }\n    }\n  })])\n},staticRenderFns: []}\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"card\"\n  }, [_c('header', [_c('img', {\n    staticClass: \"avatar\",\n    attrs: {\n      \"width\": \"40\",\n      \"height\": \"40\",\n      \"alt\": _vm.me.name,\n      \"src\": _vm.me.img\n    }\n  }), _vm._v(\" \"), _c('p', {\n    staticClass: \"name\"\n  }, [_vm._v(_vm._s(_vm.me.loginName))])]), _vm._v(\" \"), _c('footer', [_c('input', {\n    staticClass: \"search\",\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"search user...\"\n    },\n    on: {\n      \"keyup\": _vm.onKeyup\n    }\n  })])])\n},staticRenderFns: []}\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"loginPanel\"\n    }\n  }, [_c('div', {\n    attrs: {\n      \"id\": \"loginForm\"\n    }\n  }, [_c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.showLoginForm),\n      expression: \"showLoginForm\"\n    }],\n    staticClass: \"login\"\n  }, [_c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n        账号:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.loginName),\n      expression: \"user.loginName\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.loginName)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.loginName = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         密码:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.password),\n      expression: \"user.password\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.password)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.password = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"loginButtonPanel\"\n  }, [_c('a', {\n    staticClass: \"toggle\",\n    on: {\n      \"click\": _vm.toggleLogin\n    }\n  }, [_vm._v(\"还没注册？\")]), _vm._v(\" \"), _c('button', {\n    staticClass: \"soul-button\",\n    on: {\n      \"click\": _vm.denglu\n    }\n  }, [_vm._v(\"登录\")])])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.showLoginForm),\n      expression: \"!showLoginForm\"\n    }],\n    staticClass: \"register\"\n  }, [_c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n        账号:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.loginName),\n      expression: \"user.loginName\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.loginName)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.loginName = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         密码:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.password),\n      expression: \"user.password\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.password)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.password = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         确认密码:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.confirmPassword),\n      expression: \"user.confirmPassword\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.confirmPassword)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.confirmPassword = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         注册秘钥:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.registerCode),\n      expression: \"user.registerCode\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.registerCode)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.registerCode = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"loginButtonPanel\"\n  }, [_c('a', {\n    staticClass: \"toggle\",\n    on: {\n      \"click\": _vm.toggleLogin\n    }\n  }, [_vm._v(\"已经注册？\")]), _vm._v(\" \"), _c('button', {\n    staticClass: \"soul-button\",\n    on: {\n      \"click\": _vm.zhuce\n    }\n  }, [_vm._v(\"注册\")])])])])])\n},staticRenderFns: []}\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"150px\"\n    }\n  }, [_vm._v(\"\\n  当前登录用户\\n  \"), _c('ul', _vm._l((_vm.onlineUsers), function(item) {\n    return _c('li', [_c('img', {\n      staticStyle: {\n        \"width\": \"20px\",\n        \"height\": \"20px\",\n        \"display\": \"inline-block\",\n        \"vertical-align\": \"middle\"\n      },\n      attrs: {\n        \"src\": item.img\n      }\n    }), _vm._v(\" \"), (item.notReadMsgCount) ? _c('span', {\n      staticStyle: {\n        \"float\": \"right\",\n        \"background-color\": \"yellow\"\n      }\n    }, [_vm._v(_vm._s(item.notReadMsgCount) + \"未读\")]) : _vm._e(), _vm._v(\" \"), _c('a', {\n      attrs: {\n        \"href\": \"#\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.setCurrentSession(item)\n        }\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncateStr\")(item.loginName)))])])\n  }))])\n},staticRenderFns: []}\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"list\"\n  }, [_c('ul', _vm._l((_vm.sessions), function(item, index) {\n    return _c('li', {\n      class: [{\n        active: _vm.currentSession ?\n          item.loginName === _vm.currentSession.loginName :\n          index == 0\n      }],\n      on: {\n        \"click\": function($event) {\n          _vm.setCurrentSession(item)\n        }\n      }\n    }, [_c('img', {\n      staticClass: \"avatar\",\n      attrs: {\n        \"width\": \"30\",\n        \"height\": \"30\",\n        \"alt\": item.loginName,\n        \"src\": item.img\n      }\n    }), _vm._v(\" \"), _c('p', {\n      staticClass: \"name\"\n    }, [_c('span', [_vm._v(_vm._s(_vm._f(\"truncateStr\")(item.loginName)))]), _vm._v(\" \"), (item.notRead) ? _c('span', {\n      staticStyle: {\n        \"float\": \"right\",\n        \"background-color\": \"red\",\n        \"border-radius\": \"5px\",\n        \"width\": \"30px\",\n        \"text-align\": \"center\"\n      }\n    }, [_vm._v(\"\\n          \" + _vm._s(item.notRead) + \"\\n        \")]) : _vm._e()])])\n  }))])\n},staticRenderFns: []}\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.me) ? _c('div', {\n    staticClass: \"view\"\n  }, [_c('div', {\n    staticClass: \"sidebar\"\n  }, [_c('card'), _vm._v(\" \"), _c('list')], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"main\"\n  }, [_c('message'), _vm._v(\" \"), _c('TextBox')], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"userListPanel\"\n  }, [_c('userListPanel')], 1)]) : _c('div', {\n    staticClass: \"view\"\n  }, [_c('loginPanel')], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 66 */,\n/* 67 */,\n/* 68 */,\n/* 69 */,\n/* 70 */,\n/* 71 */,\n/* 72 */,\n/* 73 */,\n/* 74 */,\n/* 75 */,\n/* 76 */,\n/* 77 */,\n/* 78 */,\n/* 79 */,\n/* 80 */,\n/* 81 */,\n/* 82 */,\n/* 83 */,\n/* 84 */,\n/* 85 */,\n/* 86 */,\n/* 87 */,\n/* 88 */,\n/* 89 */,\n/* 90 */,\n/* 91 */,\n/* 92 */,\n/* 93 */,\n/* 94 */,\n/* 95 */,\n/* 96 */,\n/* 97 */,\n/* 98 */,\n/* 99 */,\n/* 100 */,\n/* 101 */,\n/* 102 */,\n/* 103 */,\n/* 104 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_card__ = __webpack_require__(46);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_card___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_card__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_list__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_list___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_list__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_textBox__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_textBox___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__components_textBox__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_message__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_message___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__components_message__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_loginPanel_vue__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_loginPanel_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__components_loginPanel_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__components_userListPanel_vue__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__components_userListPanel_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__components_userListPanel_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__js_store__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_vuex__ = __webpack_require__(0);\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  components: { Card: __WEBPACK_IMPORTED_MODULE_1__components_card___default.a, List: __WEBPACK_IMPORTED_MODULE_2__components_list___default.a, TextBox: __WEBPACK_IMPORTED_MODULE_3__components_textBox___default.a, Message: __WEBPACK_IMPORTED_MODULE_4__components_message___default.a, loginPanel: __WEBPACK_IMPORTED_MODULE_5__components_loginPanel_vue___default.a, userListPanel: __WEBPACK_IMPORTED_MODULE_6__components_userListPanel_vue___default.a },\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_8_vuex__[\"b\" /* mapGetters */])(['me'])),\n  mounted: function mounted() {\n    window.onunload = function () {\n      __WEBPACK_IMPORTED_MODULE_7__js_store__[\"a\" /* default */].state.client.socket.disconnect();\n    };\n  }\n});\n\n/***/ }),\n/* 105 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(0);\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapGetters */])(['me'])),\n  methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapMutations */])(['setFilterKey']), {\n    onKeyup: function onKeyup(e) {\n      this.setFilterKey(e.target.value);\n    }\n  })\n});\n\n/***/ }),\n/* 106 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(0);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapGetters */])(['sessions', 'currentSession'])),\n  methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapMutations */])(['setCurrentSession'])),\n  filters: {\n    truncateStr: function truncateStr(value) {\n      if (value) {\n        return value.substring(0, 10);\n      }\n    }\n  }\n});\n\n/***/ }),\n/* 107 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__js_util__ = __webpack_require__(32);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  data: function data() {\n    return {\n      showLoginForm: true,\n      user: {\n        loginName: '',\n        password: '',\n        confirmPassword: '',\n        registerCode: ''\n      }\n    };\n  },\n\n  methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"d\" /* mapActions */])(['login', 'register']), {\n    denglu: function denglu() {\n      if (!this.user.loginName) {\n        alert('用户名不能为空');\n        return;\n      }\n      if (!this.user.password) {\n        alert('密码不能为空');\n        return;\n      }\n      this.login(this.user);\n    },\n    zhuce: function zhuce() {\n      if (!this.user.loginName) {\n        alert('用户名不能为空');\n        return;\n      }\n      if (!this.user.password) {\n        alert('密码不能为空');\n        return;\n      }\n      if (!this.user.password) {\n        alert('确认密码不能为空');\n        return;\n      }\n      if (this.user.password !== this.user.password) {\n        alert('两次输入密码不一致');\n        return;\n      }\n      this.register(this.user);\n    },\n    toggleLogin: function toggleLogin() {\n      this.showLoginForm = !this.showLoginForm;\n    }\n  }),\n  mounted: function mounted() {\n    var credential = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__js_util__[\"e\" /* cache */])('credential');\n    if (!credential) {\n      return;\n    }\n    if (credential.autoLogin) {\n      this.$store.dispatch('login', credential);\n    } else {\n      this.user.loginName = credential.loginName;\n      this.user.password = credential.password;\n    }\n  }\n});\n\n/***/ }),\n/* 108 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(0);\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapGetters */])(['me', 'currentSession'])),\n  filters: {\n    time: function time(date) {\n      if (typeof date === 'string') {\n        date = new Date(date);\n      }\n      return date.getHours() + ':' + date.getMinutes();\n    },\n    readFilter: function readFilter(alreadyRead) {\n      return alreadyRead ? '已读' : '未读';\n    }\n  },\n  directives: {\n    'scroll-bottom': {\n      componentUpdated: function componentUpdated(el) {\n        el.scrollTop = el.scrollHeight - el.clientHeight;\n      }\n    }\n  }\n});\n\n/***/ }),\n/* 109 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(0);\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapGetters */])(['currentSession'])),\n  data: function data() {\n    return {\n      content: ''\n    };\n  },\n\n  methods: {\n    onKeyup: function onKeyup(e) {\n      if (e.keyCode === 13 && this.content.length) {\n        this.$store.dispatch('sendMsg', this.content);\n        this.content = '';\n      }\n    }\n  }\n});\n\n/***/ }),\n/* 110 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(0);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapGetters */])(['onlineUsers'])),\n  methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapMutations */])(['setCurrentSession'])),\n  filters: {\n    truncateStr: function truncateStr(value) {\n      if (value.length > 7) {\n        return value.substring(0, 6) + '...';\n      }\n      return value;\n    }\n  }\n});\n\n/***/ }),\n/* 111 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ChatClient;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__store__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util__ = __webpack_require__(32);\n\n\n\nfunction registerEvent() {\n  this.socket.on(\"register\", callBack);\n  this.socket.on(\"login\", callBack);\n  this.socket.on('receiveMsg', onReceiveMsg);\n  this.socket.on('disconnect', onDisconnect);\n  this.socket.on('notifyUserLogin', onNotifyUserLogin);\n  this.socket.on('kickOff', onKickOff);\n  this.socket.on('receiveRead', onReceiveRead);\n}\n\nChatClient.prototype.on = function (event, callback) {\n  this.events[event] = callback;\n  return this;\n};\n\nChatClient.prototype.connect = function (data) {\n  if (!(\"io\" in window)) {\n    alert('浏览器不支持socket.io');\n    return false;\n  }\n  var connectUrl = 'http://' + this.host + ':' + this.port;\n  this.socket = io.connect(connectUrl);\n  registerEvent.call(this);\n  return true;\n};\n\nfunction ChatClient(_ref) {\n  var host = _ref.host,\n      port = _ref.port;\n\n\n  this.host = host;\n  this.port = port;\n  this.socket = null;\n  this.events = [];\n\n  this.register = function (param) {\n    this.socket.emit(\"register\", param);\n  };\n\n  this.login = function (param) {\n    this.socket.emit(\"login\", param);\n  };\n\n  this.sendMsg = function (param) {\n    this.socket.emit('sendMsg', param);\n  };\n\n  this.read = function (param) {\n    this.socket.emit('read', param);\n  };\n}\n\nfunction callBack(_ref2) {\n  var code = _ref2.code,\n      rMsg = _ref2.rMsg,\n      rData = _ref2.rData;\n\n  if (code === 1) {\n    __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].commit('initUsers', rData);\n    __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].commit('initSessions', rData.sessions);\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"e\" /* cache */])('credential', rData);\n  } else {\n    alert(rMsg);\n  }\n}\n\nfunction onReceiveRead(message) {\n  var currentSession = __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.currentSession,\n      sessions = __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.sessions;\n\n  if (currentSession && currentSession.loginName === message.to) {\n    var session = {};\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"c\" /* copyProperties */])(session, currentSession);\n    session.messages.find(function (msg) {\n      return msg.id === message.id;\n    }).read = true;\n    return __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.currentSession = session;\n  }\n\n  var find = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"a\" /* findSession */])(message.to);\n  if (find) {\n    var ss = {};\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"c\" /* copyProperties */])(ss, find);\n    ss.messages.find(function (msg) {\n      return msg.id === message.id;\n    }).read = true;\n    var index = sessions.indexOf(find);\n    sessions.splice(index, 1, ss);\n  }\n}\n\nfunction onReceiveMsg(message) {\n  var exitSession = void 0,\n      sessions = __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.sessions,\n      currentSession = __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.currentSession,\n      users = __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.users;\n\n  if (currentSession && currentSession.loginName === message.from) {\n    var session = {};\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"c\" /* copyProperties */])(session, currentSession);\n    session.messages.push(message);\n    __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.currentSession = session;\n    return __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.client.read(message);\n  }\n\n  var userFrom = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"b\" /* findUser */])(message.from);\n\n  if (!(exitSession = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"a\" /* findSession */])(message.from))) {\n    exitSession = {\n      loginName: message.from,\n      img: userFrom.img,\n      messages: [message]\n    };\n    sessions.push(exitSession);\n  } else {\n    exitSession.messages.push(message);\n  }\n\n  if (!currentSession || currentSession && currentSession.loginName !== message.from) {\n    var user = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"b\" /* findUser */])(message.from);\n    var index = users.indexOf(user);\n    if (!user.notReadMsgCount) user.notReadMsgCount = 0;\n    user.notReadMsgCount++;\n    users.splice(index, 1, user);\n\n    var ss = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"a\" /* findSession */])(message.from);\n    index = sessions.indexOf(ss);\n    ss.notRead = user.notReadMsgCount;\n    sessions.splice(index, 1, ss);\n  }\n}\n\nfunction onDisconnect(loginName) {\n  __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.users = __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.users.filter(function (item) {\n    return item && item.loginName !== loginName;\n  });\n}\n\nfunction onNotifyUserLogin(onlineUser) {\n  __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].commit('refreshUser', onlineUser);\n}\n\nfunction onKickOff(_ref3) {\n  var rData = _ref3.rData;\n\n  __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].commit('logout');\n  alert(rData);\n}\n\n/***/ }),\n/* 112 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__app_vue__ = __webpack_require__(44);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__app_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__app_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__js_store__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__css_reset_css__ = __webpack_require__(45);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__css_reset_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__css_reset_css__);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.devtools = true;\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__app_vue___default.a },\n  store: __WEBPACK_IMPORTED_MODULE_2__js_store__[\"a\" /* default */]\n});\n\n/***/ })\n],[112]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.cd896cdb3214dd2098d9.js","/**\n * Vuex\n * http://vuex.vuejs.org/zh-cn/intro.html\n */\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport {\n  ChatClient\n} from './client'\nimport {\n  findSession,\n  findUser,\n  copyProperties,\n  guid\n} from './util'\nVue.use(Vuex);\n\nfunction connect(state) {\n  state.client = new ChatClient({host: '47.94.2.0', port: 80})\n  if (!state.client.connect()) {\n    alert('连接失败')\n  }\n}\n\nconst store = new Vuex.Store({\n  state: {\n    client: null,//socket 客户端\n    users: [],//用户列表\n    me: null, // 我的id（登录人id）\n    sessions: [],// 会话列表\n    currentSession: null,//当前聊天窗口id\n    filterKey: '' //搜索用户的所搜词\n  },\n  getters: {\n    client: ({client}) => client,\n    users: ({users}) => users,\n    onlineUsers: ({users, myLoginName}) => users.filter(user => user.loginName !== myLoginName),\n    me: ({me}) => me,\n    myLoginName: ({myLoginName}) => myLoginName,\n    sessions: ({sessions, filterKey}) => sessions && sessions.filter(session => !filterKey || session.loginName.toUpperCase().includes(filterKey.toUpperCase())),\n    currentSession: ({currentSession}) => currentSession\n  },\n  mutations: {\n    //初始化会话记录\n    initSessions(state, sessions){\n      var userMapNotRead = {},\n        users = state.users\n      //计算有多少条未读，和登录用户匹配\n      sessions.forEach(session => {\n        session.messages.forEach(msg => {\n          if (!msg.read) {\n            if (!userMapNotRead[session.loginName]) {\n              userMapNotRead[session.loginName] = 0\n            }\n            userMapNotRead[session.loginName]++\n          }\n        })\n      })\n\n      users.forEach(user => {\n        var count = userMapNotRead[user.loginName]//未读数量\n        var index = users.indexOf(user)//在线用户的下标\n        user.notReadMsgCount = count\n        users.splice(index, 1, user)\n      })\n\n      state.sessions = sessions\n    },\n    //设置当前会话\n    setCurrentSession (state, session) {\n      if (!session.messages) session.messages = []\n      var exitSession = findSession(session.loginName)\n      if (exitSession) {\n        state.currentSession = exitSession\n      } else {\n        exitSession = session\n        state.currentSession = session //sessions包含currentSession的引用\n        state.sessions.push(session)\n      }\n\n      exitSession.notRead = 0\n\n      if (exitSession.messages[0]) {\n        state.client.read(exitSession.messages[0])\n      }\n\n      var find = findUser(session.loginName);\n      if (find) {\n        var index = state.users.indexOf(find)\n        find.notReadMsgCount = 0\n        state.users.splice(index, 1, find)\n      }\n    },\n    //初始化用户列表\n    initUsers(state, user){\n      state.me = user\n      state.users = user.onlineUsers\n    },\n    //更新用户列表中用户的信息\n    refreshUser(state, user){\n      var oldUser\n      if ((oldUser = findUser(user.loginName))) {\n        //用户已经在用户列表,更新用户信息\n        copyProperties(oldUser, user)\n        return state.users[state.users.indexOf(oldUser)] = user\n      }\n      //将用户加入列表\n      state.users.push(user)\n    },\n    setFilterKey: (state, value) => state.filterKey = value,\n    logout: (state) => state.me = null\n  },\n  actions: {\n    register({state}, payload){\n      connect(state)\n      state.client.register(payload)\n    },\n    login({state}, payload) {\n      connect(state)\n      state.client.login(payload)\n    },\n    sendMsg ({state}, content) {\n      var msgId = guid(),\n        message = {\n          id: msgId,\n          from: state.me.loginName,\n          to: state.currentSession.loginName,\n          content,\n          self: true,\n          read: false,\n          date: new Date()\n        }\n\n      var session = {}\n      copyProperties(session, state.currentSession)\n      session.messages.push(message)\n      state.currentSession = session\n      //往当前窗口写消息\n\n      state.client.sendMsg({\n        id: msgId,\n        'from': state.me.loginName,\n        'to': state.currentSession.loginName,\n        content\n      })\n    }\n  }\n});\nexport default store\n\n\n\n// WEBPACK FOOTER //\n// ./src/frontend/js/store.js","import store from './store'\r\n\r\nfunction findSession(loginName) {\r\n  let sessions = store.getters.sessions\r\n  for (let i = 0; i < sessions.length; i++) {\r\n    if (sessions[i].loginName === loginName) {\r\n      return sessions[i]\r\n    }\r\n  }\r\n}\r\n\r\nfunction findUser(loginName) {\r\n  let users = store.getters.users\r\n  for (let i = 0; i < users.length; i++) {\r\n    if (users[i].loginName === loginName) {\r\n      return users[i]\r\n    }\r\n  }\r\n}\r\n\r\nfunction copyProperties(target, source) {\r\n  if (!target || !source) {\r\n    return console.error('target and source must not be null')\r\n  }\r\n  for (let key in source) {\r\n    target[key] = source[key]\r\n  }\r\n}\r\n\r\nfunction cache(key, value) {\r\n  if (!value) {\r\n    let valueStr = window.localStorage.getItem(key)\r\n    return valueStr\r\n      ? JSON.parse(valueStr)\r\n      : null\r\n  }\r\n\r\n  if (typeof value === 'object') {\r\n    value = JSON.stringify(value)\r\n  }\r\n  window.localStorage.setItem(key, value)\r\n}\r\n\r\nlet response = {\r\n  ok: function (data) {\r\n    this.code = 1\r\n    this.rData = data\r\n    return this\r\n  },\r\n  fail: function (msg) {\r\n    this.code = 0\r\n    this.rMsg = msg\r\n    return this\r\n  }\r\n}\r\n\r\nfunction guid() {\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n    var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\r\n    return v.toString(16);\r\n  });\r\n}\r\n\r\nexport {\r\n  findSession,\r\n  findUser,\r\n  copyProperties,\r\n  cache,\r\n  response,\r\n  guid\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/frontend/js/util.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b822579a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./app.vue\")\n}\nvar Component = require(\"!../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./app.vue\"),\n  /* template */\n  require(\"!!../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b822579a\\\",\\\"hasScoped\\\":true}!../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./app.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-b822579a\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/app.vue\n// module id = 44\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-59b0957b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./card.vue\")\n}\nvar Component = require(\"!../../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./card.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-59b0957b\\\",\\\"hasScoped\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./card.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-59b0957b\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/components/card.vue\n// module id = 46\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ab3957ee\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./list.vue\")\n}\nvar Component = require(\"!../../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./list.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ab3957ee\\\",\\\"hasScoped\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./list.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-ab3957ee\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/components/list.vue\n// module id = 47\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5ca4d274\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./loginPanel.vue\")\n}\nvar Component = require(\"!../../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./loginPanel.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5ca4d274\\\",\\\"hasScoped\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./loginPanel.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-5ca4d274\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/components/loginPanel.vue\n// module id = 48\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-081a726c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./message.vue\")\n}\nvar Component = require(\"!../../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./message.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-081a726c\\\",\\\"hasScoped\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./message.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-081a726c\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/components/message.vue\n// module id = 49\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0e640443\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./textBox.vue\")\n}\nvar Component = require(\"!../../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./textBox.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0e640443\\\",\\\"hasScoped\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./textBox.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-0e640443\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/components/textBox.vue\n// module id = 50\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5d03e1c0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./userListPanel.vue\")\n}\nvar Component = require(\"!../../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./userListPanel.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5d03e1c0\\\",\\\"hasScoped\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./userListPanel.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-5d03e1c0\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/components/userListPanel.vue\n// module id = 51\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"scroll-bottom\",\n      rawName: \"v-scroll-bottom\"\n    }],\n    staticClass: \"message\"\n  }, [(_vm.currentSession) ? _c('ul', _vm._l((_vm.currentSession.messages), function(item) {\n    return _c('li', [_c('p', {\n      staticClass: \"time\"\n    }, [_c('span', [_vm._v(_vm._s(_vm._f(\"time\")(item.date)))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"main\",\n      class: {\n        self: item.self\n      }\n    }, [_c('img', {\n      staticClass: \"avatar\",\n      attrs: {\n        \"width\": \"30\",\n        \"height\": \"30\",\n        \"src\": item.self ? _vm.me.img : _vm.currentSession.img\n      }\n    }), _vm._v(\" \"), _c('div', {\n      staticClass: \"text\"\n    }, [_vm._v(_vm._s(item.content))]), _vm._v(\" \"), (item.self) ? _c('div', {\n      staticClass: \"read-text\"\n    }, [_vm._v(_vm._s(_vm._f(\"readFilter\")(item.read)) + \" \")]) : _vm._e()])])\n  })) : _vm._e()])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-081a726c\",\"hasScoped\":true}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/components/message.vue\n// module id = 52\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"text\"\n  }, [_c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.content),\n      expression: \"content\"\n    }],\n    attrs: {\n      \"disabled\": !_vm.currentSession,\n      \"placeholder\": \"按 Enter 发送\"\n    },\n    domProps: {\n      \"value\": (_vm.content)\n    },\n    on: {\n      \"keyup\": _vm.onKeyup,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.content = $event.target.value\n      }\n    }\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-0e640443\",\"hasScoped\":true}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/components/textBox.vue\n// module id = 53\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"card\"\n  }, [_c('header', [_c('img', {\n    staticClass: \"avatar\",\n    attrs: {\n      \"width\": \"40\",\n      \"height\": \"40\",\n      \"alt\": _vm.me.name,\n      \"src\": _vm.me.img\n    }\n  }), _vm._v(\" \"), _c('p', {\n    staticClass: \"name\"\n  }, [_vm._v(_vm._s(_vm.me.loginName))])]), _vm._v(\" \"), _c('footer', [_c('input', {\n    staticClass: \"search\",\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"search user...\"\n    },\n    on: {\n      \"keyup\": _vm.onKeyup\n    }\n  })])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-59b0957b\",\"hasScoped\":true}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/components/card.vue\n// module id = 54\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"loginPanel\"\n    }\n  }, [_c('div', {\n    attrs: {\n      \"id\": \"loginForm\"\n    }\n  }, [_c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.showLoginForm),\n      expression: \"showLoginForm\"\n    }],\n    staticClass: \"login\"\n  }, [_c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n        账号:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.loginName),\n      expression: \"user.loginName\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.loginName)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.loginName = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         密码:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.password),\n      expression: \"user.password\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.password)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.password = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"loginButtonPanel\"\n  }, [_c('a', {\n    staticClass: \"toggle\",\n    on: {\n      \"click\": _vm.toggleLogin\n    }\n  }, [_vm._v(\"还没注册？\")]), _vm._v(\" \"), _c('button', {\n    staticClass: \"soul-button\",\n    on: {\n      \"click\": _vm.denglu\n    }\n  }, [_vm._v(\"登录\")])])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.showLoginForm),\n      expression: \"!showLoginForm\"\n    }],\n    staticClass: \"register\"\n  }, [_c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n        账号:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.loginName),\n      expression: \"user.loginName\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.loginName)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.loginName = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         密码:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.password),\n      expression: \"user.password\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.password)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.password = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         确认密码:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.confirmPassword),\n      expression: \"user.confirmPassword\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.confirmPassword)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.confirmPassword = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         注册秘钥:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.registerCode),\n      expression: \"user.registerCode\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.registerCode)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.registerCode = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"loginButtonPanel\"\n  }, [_c('a', {\n    staticClass: \"toggle\",\n    on: {\n      \"click\": _vm.toggleLogin\n    }\n  }, [_vm._v(\"已经注册？\")]), _vm._v(\" \"), _c('button', {\n    staticClass: \"soul-button\",\n    on: {\n      \"click\": _vm.zhuce\n    }\n  }, [_vm._v(\"注册\")])])])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-5ca4d274\",\"hasScoped\":true}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/components/loginPanel.vue\n// module id = 55\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"150px\"\n    }\n  }, [_vm._v(\"\\n  当前登录用户\\n  \"), _c('ul', _vm._l((_vm.onlineUsers), function(item) {\n    return _c('li', [_c('img', {\n      staticStyle: {\n        \"width\": \"20px\",\n        \"height\": \"20px\",\n        \"display\": \"inline-block\",\n        \"vertical-align\": \"middle\"\n      },\n      attrs: {\n        \"src\": item.img\n      }\n    }), _vm._v(\" \"), (item.notReadMsgCount) ? _c('span', {\n      staticStyle: {\n        \"float\": \"right\",\n        \"background-color\": \"yellow\"\n      }\n    }, [_vm._v(_vm._s(item.notReadMsgCount) + \"未读\")]) : _vm._e(), _vm._v(\" \"), _c('a', {\n      attrs: {\n        \"href\": \"#\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.setCurrentSession(item)\n        }\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncateStr\")(item.loginName)))])])\n  }))])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-5d03e1c0\",\"hasScoped\":true}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/components/userListPanel.vue\n// module id = 56\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"list\"\n  }, [_c('ul', _vm._l((_vm.sessions), function(item, index) {\n    return _c('li', {\n      class: [{\n        active: _vm.currentSession ?\n          item.loginName === _vm.currentSession.loginName :\n          index == 0\n      }],\n      on: {\n        \"click\": function($event) {\n          _vm.setCurrentSession(item)\n        }\n      }\n    }, [_c('img', {\n      staticClass: \"avatar\",\n      attrs: {\n        \"width\": \"30\",\n        \"height\": \"30\",\n        \"alt\": item.loginName,\n        \"src\": item.img\n      }\n    }), _vm._v(\" \"), _c('p', {\n      staticClass: \"name\"\n    }, [_c('span', [_vm._v(_vm._s(_vm._f(\"truncateStr\")(item.loginName)))]), _vm._v(\" \"), (item.notRead) ? _c('span', {\n      staticStyle: {\n        \"float\": \"right\",\n        \"background-color\": \"red\",\n        \"border-radius\": \"5px\",\n        \"width\": \"30px\",\n        \"text-align\": \"center\"\n      }\n    }, [_vm._v(\"\\n          \" + _vm._s(item.notRead) + \"\\n        \")]) : _vm._e()])])\n  }))])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-ab3957ee\",\"hasScoped\":true}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/components/list.vue\n// module id = 57\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.me) ? _c('div', {\n    staticClass: \"view\"\n  }, [_c('div', {\n    staticClass: \"sidebar\"\n  }, [_c('card'), _vm._v(\" \"), _c('list')], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"main\"\n  }, [_c('message'), _vm._v(\" \"), _c('TextBox')], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"userListPanel\"\n  }, [_c('userListPanel')], 1)]) : _c('div', {\n    staticClass: \"view\"\n  }, [_c('loginPanel')], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-b822579a\",\"hasScoped\":true}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/app.vue\n// module id = 58\n// module chunks = 1","<script>\r\n  import Card from './components/card';\r\n  import List from './components/list';\r\n  import TextBox from './components/textBox';\r\n  import Message from './components/message';\r\n  import loginPanel from './components/loginPanel.vue';\r\n  import userListPanel from './components/userListPanel.vue';\r\n  import store from './js/store'\r\n  import {\r\n    mapGetters,\r\n    mapActions\r\n  } from 'vuex'\r\n  export default {\r\n    components: {Card, List, TextBox, Message, loginPanel, userListPanel},\r\n    computed: {\r\n      ...mapGetters(['me'])\r\n    },\r\n    mounted(){\r\n      window.onunload = function() {\r\n        store.state.client.socket.disconnect()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<template>\r\n  <div class=\"view\" v-if=\"me\">\r\n    <div class=\"sidebar\">\r\n      <card></card>\r\n      <list></list>\r\n    </div>\r\n    <div class=\"main\">\r\n      <message></message>\r\n      <TextBox></TextBox>\r\n    </div>\r\n    <div class=\"userListPanel\">\r\n      <userListPanel></userListPanel>\r\n    </div>\r\n  </div>\r\n  <div class=\"view\" v-else>\r\n    <loginPanel></loginPanel>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"less\" scoped>\r\n  .view {\r\n    margin: 0 auto;\r\n    width: 100%;\r\n    height: 100%;\r\n\r\n    overflow: hidden;\r\n    border-radius: 3px;\r\n\r\n    .sidebar, .main {\r\n      height: 100%;\r\n    }\r\n    .sidebar {\r\n      float: left;\r\n      width: 25%;\r\n      color: #f4f4f4;\r\n      background-color: #2e3238;\r\n      overflow: scroll;\r\n    }\r\n    .main {\r\n      width: 75%;\r\n      position: relative;\r\n      overflow: hidden;\r\n      background-color: #eee;\r\n    }\r\n    .text {\r\n      position: absolute;\r\n      width: 100%;\r\n      bottom: 0;\r\n      left: 0;\r\n    }\r\n    .message {\r\n      height: ~'calc(100% - 160px)';\r\n    }\r\n  }\r\n\r\n  .userListPanel {\r\n    position: fixed;\r\n    top: 20px;\r\n    right: 100px;\r\n    width: 100px;\r\n    background-color: white;\r\n  }\r\n\r\n  @media screen and (min-width: 1200px) {\r\n    .view{\r\n      width: 900px;\r\n      height: 100%;\r\n    }\r\n    .loginPanel{\r\n      width: 900px;\r\n      height: 100%;\r\n      margin: 0 auto;\r\n    }\r\n  }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// app.vue?3da00184","<script>\r\n  import {mapGetters, mapMutations} from \"vuex\";\r\n  export default {\r\n    computed: {\r\n      ...mapGetters([\r\n        'me'\r\n      ])\r\n    },\r\n    methods: {\r\n      ...mapMutations(['setFilterKey']),\r\n      onKeyup (e) {\r\n        this.setFilterKey(e.target.value);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<template>\r\n  <div class=\"card\">\r\n    <header>\r\n      <img class=\"avatar\" width=\"40\" height=\"40\" :alt=\"me.name\" :src=\"me.img\">\r\n      <p class=\"name\">{{me.loginName}}</p>\r\n    </header>\r\n    <footer>\r\n      <input class=\"search\" type=\"text\" placeholder=\"search user...\" @keyup=\"onKeyup\">\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"less\">\r\n  .card {\r\n    padding: 12px;\r\n    border-bottom: solid 1px #24272C;\r\n\r\n    footer {\r\n      margin-top: 10px;\r\n    }\r\n\r\n    .avatar, .name {\r\n      vertical-align: middle;\r\n    }\r\n    .avatar {\r\n      border-radius: 2px;\r\n    }\r\n    .name {\r\n      display: inline-block;\r\n      margin: 0 0 0 15px;\r\n      font-size: 16px;\r\n    }\r\n    .search {\r\n      padding: 0 10px;\r\n      width: 100%;\r\n      font-size: 12px;\r\n      color: #fff;\r\n      height: 30px;\r\n      line-height: 30px;\r\n      border: solid 1px #3a3a3a;\r\n      border-radius: 4px;\r\n      outline: none;\r\n      background-color: #26292E;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// card.vue?4f7b7492","<script>\r\n  import {mapGetters} from \"vuex\";\r\n  import {mapMutations} from \"vuex\";\r\n  export default {\r\n    computed: {\r\n      ...mapGetters([\r\n        'sessions',\r\n        'currentSession'\r\n      ])\r\n    },\r\n    methods: {\r\n      ...mapMutations([\r\n        'setCurrentSession'\r\n      ])\r\n    },\r\n    filters: {\r\n      truncateStr(value){\r\n        if (value) {\r\n          return value.substring(0, 10)\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<template>\r\n  <div class=\"list\">\r\n    <ul>\r\n      <li v-for=\"(item, index) in sessions\"\r\n          :class=\"[{\r\n          active: currentSession\r\n          ? item.loginName === currentSession.loginName\r\n          : index == 0}]\"\r\n          @click=\"setCurrentSession(item)\">\r\n        <img class=\"avatar\" width=\"30\" height=\"30\" :alt=\"item.loginName\" :src=\"item.img\">\r\n        <p class=\"name\">\r\n          <span>{{item.loginName | truncateStr}}</span>\r\n          <span style=\"float: right;\r\n          background-color: red;border-radius: 5px;\r\n          width: 30px;\r\n          text-align: center\" v-if=\"item.notRead\">\r\n            {{item.notRead}}\r\n          </span>\r\n        </p>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"less\">\r\n  .list {\r\n\r\n    li {\r\n      padding: 12px 15px;\r\n      border-bottom: 1px solid #292C33;\r\n      cursor: pointer;\r\n      transition: background-color .1s;\r\n\r\n      &:hover {\r\n        background-color: rgba(255, 255, 255, 0.03);\r\n      }\r\n      &.active {\r\n        background-color: rgba(255, 255, 255, 0.5);\r\n      }\r\n    }\r\n    .avatar, .name {\r\n      vertical-align: middle;\r\n    }\r\n    .avatar {\r\n      display: block;\r\n      border-radius: 2px;\r\n    }\r\n    .name {\r\n      display: block;\r\n      margin: 0 0 0 15px;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// list.vue?0b826030","<script>\r\n  import {\r\n    mapGetters,\r\n    mapActions\r\n  } from 'vuex'\r\n  import{\r\n    cache\r\n  }from '../js/util'\r\n  export default{\r\n    data(){\r\n      return {\r\n        showLoginForm: true,\r\n        user: {\r\n          loginName: '',\r\n          password: '',\r\n          confirmPassword: '',\r\n          registerCode: ''\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      ...mapActions(['login', 'register']),\r\n      denglu () {\r\n        if (!this.user.loginName) {\r\n          alert('用户名不能为空')\r\n          return\r\n        }\r\n        if (!this.user.password) {\r\n          alert('密码不能为空')\r\n          return\r\n        }\r\n        this.login(this.user);\r\n      },\r\n      zhuce(){\r\n        if (!this.user.loginName) {\r\n          alert('用户名不能为空')\r\n          return\r\n        }\r\n        if (!this.user.password) {\r\n          alert('密码不能为空')\r\n          return\r\n        }\r\n        if (!this.user.password) {\r\n          alert('确认密码不能为空')\r\n          return\r\n        }\r\n        if (this.user.password !== this.user.password) {\r\n          alert('两次输入密码不一致')\r\n          return\r\n        }\r\n        this.register(this.user);\r\n      },\r\n      toggleLogin(){\r\n        this.showLoginForm = !this.showLoginForm\r\n      }\r\n    },\r\n    mounted(){\r\n      var credential = cache('credential');\r\n      if (!credential) {\r\n        return\r\n      }\r\n      if (credential.autoLogin) {\r\n        this.$store.dispatch('login', credential)\r\n      } else {\r\n        this.user.loginName = credential.loginName\r\n        this.user.password = credential.password\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<template>\r\n  <div id=\"loginPanel\">\r\n    <div id=\"loginForm\">\r\n      <div class=\"login\" v-show=\"showLoginForm\">\r\n        <p>\r\n          <span class=\"soul-label\">\r\n          账号:\r\n          </span>\r\n          <input class=\"soul-input\" type=\"text\" v-model=\"user.loginName\"/>\r\n        </p>\r\n        <p>\r\n          <span class=\"soul-label\">\r\n           密码:\r\n          </span>\r\n          <input class=\"soul-input\" type=\"text\" v-model=\"user.password\"/>\r\n        </p>\r\n        <div class=\"loginButtonPanel\">\r\n          <a class=\"toggle\" @click=\"toggleLogin\">还没注册？</a>\r\n          <button class=\"soul-button\" @click=\"denglu\">登录</button>\r\n        </div>\r\n      </div>\r\n      <div class=\"register\" v-show=\"!showLoginForm\">\r\n        <p>\r\n          <span class=\"soul-label\">\r\n          账号:\r\n          </span>\r\n          <input class=\"soul-input\" type=\"text\" v-model=\"user.loginName\"/>\r\n        </p>\r\n        <p>\r\n          <span class=\"soul-label\">\r\n           密码:\r\n          </span>\r\n          <input class=\"soul-input\" type=\"text\" v-model=\"user.password\"/>\r\n        </p>\r\n        <p>\r\n          <span class=\"soul-label\">\r\n           确认密码:\r\n          </span>\r\n          <input class=\"soul-input\" type=\"text\" v-model=\"user.confirmPassword\"/>\r\n        </p>\r\n        <p>\r\n          <span class=\"soul-label\">\r\n           注册秘钥:\r\n          </span>\r\n          <input class=\"soul-input\" type=\"text\" v-model=\"user.registerCode\"/>\r\n        </p>\r\n        <div class=\"loginButtonPanel\">\r\n          <a class=\"toggle\" @click=\"toggleLogin\">已经注册？</a>\r\n          <button class=\"soul-button\" @click=\"zhuce\">注册</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style lang=\"less\" scoped>\r\n  .soul-button {\r\n    margin-left:2%;;\r\n    font-weight: 400;\r\n    text-align: center;\r\n    vertical-align: middle;\r\n    -ms-touch-action: manipulation;\r\n    touch-action: manipulation;\r\n    cursor: pointer;\r\n    white-space: nowrap;\r\n    line-height: 1.5;\r\n    -webkit-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n    padding: 6px 15px;\r\n    font-size: 12px;\r\n    border-radius: 4px;\r\n    transition: color .2s linear, background-color .2s linear, border .2s linear;\r\n    color: #fff;\r\n    background: rgb(25, 190, 170) none;\r\n    border: 1px solid #19be6b;\r\n    &:hover {\r\n      color: #fff;\r\n      background: rgba(25, 190, 170, 0.8);\r\n      border-color: #19be6b;\r\n    }\r\n  }\r\n\r\n  #loginPanel {\r\n    display: -webkit-flex;\r\n    display: flex;\r\n    -webkit-align-items: center;\r\n    align-items: center;\r\n    -webkit-justify-content: center;\r\n    justify-content: center;\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 3px;\r\n    background-color: rgb(255, 255, 255);\r\n  }\r\n\r\n  #loginForm {\r\n    width: 80%;\r\n  }\r\n\r\n  .loginButtonPanel {\r\n    display: -webkit-flex;\r\n    display: flex;\r\n    -webkit-align-items: center;\r\n    align-items: center;\r\n    -webkit-justify-content: center;\r\n    justify-content: center;\r\n  }\r\n\r\n  .toggle {\r\n    color: blue;\r\n    &:hover {\r\n      cursor: pointer;\r\n    }\r\n  }\r\n\r\n  .soul-label {\r\n    width: 20%;\r\n    display: inline-block;\r\n    text-align: center;\r\n  }\r\n\r\n  .soul-input {\r\n    display: inline-block;\r\n    width: 76%;\r\n    height: 32px;\r\n    line-height: 1.5;\r\n    padding: 4px 7px;\r\n    font-size: 12px;\r\n    border: 1px solid #dddee1;\r\n    border-radius: 4px;\r\n    color: #495060;\r\n    background-color: #fff;\r\n    background-image: none;\r\n    position: relative;\r\n    cursor: text;\r\n    transition: border 1s ease-in-out, background 1s ease-in-out, box-shadow 1s ease-in-out;\r\n\r\n    &:hover {\r\n      -webkit-transition: border linear .2s, -webkit-box-shadow linear .5s;\r\n      border-color: rgba(141, 39, 142, .75);\r\n      -webkit-box-shadow: 0 0 18px rgba(111, 1, 32, 3);\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// loginPanel.vue?3fc66b17","<script>\r\n  import {mapGetters} from 'vuex'\r\n  export default {\r\n    computed: {\r\n      ...mapGetters(['me', 'currentSession'])\r\n    },\r\n    filters: {\r\n      // 将日期过滤为 hour:minutes\r\n      time (date) {\r\n        if (typeof date === 'string') {\r\n          date = new Date(date);\r\n        }\r\n        return date.getHours() + ':' + date.getMinutes();\r\n      },\r\n      readFilter(alreadyRead){\r\n        return alreadyRead\r\n          ? '已读'\r\n          : '未读'\r\n      }\r\n    },\r\n    directives: {\r\n      // 发送消息后滚动到底部\r\n      'scroll-bottom': {\r\n        componentUpdated(el){\r\n          el.scrollTop = el.scrollHeight - el.clientHeight;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<template>\r\n  <div class=\"message\" v-scroll-bottom>\r\n    <ul v-if=\"currentSession\">\r\n      <li v-for=\"item in currentSession.messages\">\r\n        <p class=\"time\">\r\n          <span>{{ item.date | time}}</span>\r\n        </p>\r\n        <div class=\"main\" :class=\"{ self: item.self }\">\r\n          <img class=\"avatar\" width=\"30\" height=\"30\" :src=\"item.self ? me.img : currentSession.img\"/>\r\n          <div class=\"text\">{{ item.content }}</div>\r\n          <div v-if=\"item.self\" class=\"read-text\">{{ item.read | readFilter}} </div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"less\" scoped>\r\n  .message {\r\n    padding: 10px 15px;\r\n    overflow-y: scroll;\r\n\r\n    li {\r\n      margin-bottom: 15px;\r\n    }\r\n    .time {\r\n      margin: 7px 0;\r\n      text-align: center;\r\n\r\n      > span {\r\n        display: inline-block;\r\n        padding: 0 18px;\r\n        font-size: 12px;\r\n        color: #fff;\r\n        border-radius: 2px;\r\n        background-color: #dcdcdc;\r\n      }\r\n    }\r\n    .avatar {\r\n      float: left;\r\n      margin: 0 10px 0 0;\r\n      border-radius: 3px;\r\n    }\r\n    .text {\r\n      vertical-align: middle;\r\n      display: inline-block;\r\n      position: relative;\r\n      padding: 0 10px;\r\n      max-width: ~'calc(100% - 40px)';\r\n      min-height: 30px;\r\n      line-height: 2.5;\r\n      font-size: 12px;\r\n      text-align: left;\r\n      word-break: break-all;\r\n      background-color: #fafafa;\r\n      border-radius: 4px;\r\n\r\n      &:before {\r\n        content: \" \";\r\n        position: absolute;\r\n        top: 9px;\r\n        right: 100%;\r\n        border: 6px solid transparent;\r\n        border-right-color: #fafafa;\r\n      }\r\n    }\r\n\r\n    .read-text {\r\n      vertical-align: bottom;\r\n      display: inline-block;\r\n      position: relative;\r\n      top:20px;\r\n      left: -5px;\r\n      padding: 0 10px;\r\n      max-width: ~'calc(100% - 40px)';\r\n      min-height: 30px;\r\n      line-height: 2;\r\n      font-size: 10px;\r\n      text-align: left;\r\n      word-break: break-all;\r\n      border-radius: 4px;\r\n    }\r\n\r\n    .self {\r\n      text-align: right;\r\n\r\n      .avatar {\r\n        float: right;\r\n        margin: 0 0 0 10px;\r\n      }\r\n      .text {\r\n        background-color: #b2e281;\r\n\r\n        &:before {\r\n          right: inherit;\r\n          left: 100%;\r\n          border-right-color: transparent;\r\n          border-left-color: #b2e281;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// message.vue?5627e5a2","<script>\r\n  import {mapGetters} from 'vuex'\r\n  export default {\r\n    computed: {\r\n      ...mapGetters(['currentSession'])\r\n    },\r\n    data(){\r\n      return {\r\n        content: ''\r\n      }\r\n    },\r\n    methods: {\r\n      onKeyup (e) {\r\n        if (e.keyCode === 13 && this.content.length) {\r\n          this.$store.dispatch('sendMsg', this.content);\r\n          this.content = '';\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<template>\r\n  <div class=\"text\">\r\n    <textarea :disabled=\"!currentSession\"\r\n              placeholder=\"按 Enter 发送\"\r\n              v-model=\"content\"\r\n              @keyup=\"onKeyup\">\r\n    </textarea>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"less\" scoped>\r\n  .text {\r\n    height: 160px;\r\n    border-top: solid 1px #ddd;\r\n\r\n    textarea {\r\n      padding: 10px;\r\n      height: 100%;\r\n      width: 100%;\r\n      border: none;\r\n      outline: none;\r\n      font-family: \"Micrsofot Yahei\";\r\n      resize: none;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// textBox.vue?2e7a9e37","<script>\r\n  import {mapGetters} from 'vuex'\r\n  import {mapMutations} from 'vuex'\r\n  export default{\r\n    computed: {\r\n      ...mapGetters(['onlineUsers'])\r\n    },\r\n    methods: {\r\n      ...mapMutations(['setCurrentSession'])\r\n    },\r\n    filters: {\r\n      truncateStr(value){\r\n        if (value.length > 7) {\r\n          return value.substring(0, 6) + '...'\r\n        }\r\n        return value\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<template>\r\n  <div style=\"width: 150px\">\r\n    当前登录用户\r\n    <ul>\r\n      <li v-for=\"item in onlineUsers\">\r\n        <img style=\"width: 20px;height: 20px;display: inline-block;vertical-align: middle\" :src=\"item.img\"/>\r\n        <span style=\"float: right;background-color: yellow\" v-if=\"item.notReadMsgCount\">{{item.notReadMsgCount}}未读</span>\r\n        <a @click=\"setCurrentSession(item)\" href=\"#\">{{item.loginName | truncateStr}}</a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// userListPanel.vue?23f6f3a3","import store from './store'\r\nimport {\r\n  findSession,\r\n  findUser,\r\n  cache,\r\n  copyProperties\r\n} from './util'\r\n\r\n//注册事件\r\nfunction registerEvent() {\r\n  this.socket.on(\"register\", callBack)\r\n  this.socket.on(\"login\", callBack)\r\n  this.socket.on('receiveMsg', onReceiveMsg)\r\n  this.socket.on('disconnect', onDisconnect)\r\n  this.socket.on('notifyUserLogin', onNotifyUserLogin)\r\n  this.socket.on('kickOff', onKickOff)\r\n  this.socket.on('receiveRead', onReceiveRead)\r\n}\r\n//注册回调事件（监听服务端推送事件）\r\nChatClient.prototype.on = function (event, callback) {\r\n  this.events[event] = callback;\r\n  return this;\r\n}\r\n\r\n//与服务器建立webSocket连接\r\nChatClient.prototype.connect = function (data) {\r\n  if (!(\"io\" in window)) {\r\n    alert('浏览器不支持socket.io')\r\n    return false\r\n  }\r\n  let connectUrl = 'http://' + this.host + ':' + this.port\r\n  this.socket = io.connect(connectUrl)\r\n  registerEvent.call(this)\r\n  return true\r\n}\r\n\r\nexport function ChatClient({host, port}) {\r\n\r\n  this.host = host\r\n  this.port = port\r\n  this.socket = null\r\n  this.events = []\r\n\r\n  this.register = function (param) {\r\n    this.socket.emit(\"register\", param);\r\n  }\r\n\r\n  this.login = function (param) {\r\n    this.socket.emit(\"login\", param);\r\n  }\r\n\r\n  this.sendMsg = function (param) {\r\n    this.socket.emit('sendMsg', param);\r\n  }\r\n\r\n  this.read = function (param) {\r\n    this.socket.emit('read', param)\r\n  }\r\n}\r\n\r\nfunction callBack({code, rMsg, rData}) {\r\n  if (code === 1) {\r\n    store.commit('initUsers', rData)\r\n    store.commit('initSessions', rData.sessions)\r\n    cache('credential', rData)\r\n  } else {\r\n    alert(rMsg)\r\n  }\r\n}\r\n\r\nfunction onReceiveRead(message) {\r\n  let currentSession = store.state.currentSession,\r\n    sessions = store.state.sessions\r\n\r\n  if (currentSession && currentSession.loginName === message.to) {\r\n    //往当前对话窗口添加消息\r\n    let session = {}\r\n    copyProperties(session, currentSession)\r\n    session.messages.find(msg => msg.id === message.id).read = true//标记已读\r\n    return store.state.currentSession = session\r\n  }\r\n\r\n  let find = findSession(message.to)\r\n  if (find) {\r\n    //往当前对话窗口添加消息\r\n    let ss = {}\r\n    copyProperties(ss, find)\r\n    ss.messages.find(msg => msg.id === message.id).read = true//标记已读\r\n    let index = sessions.indexOf(find)\r\n    sessions.splice(index, 1, ss)\r\n  }\r\n}\r\n\r\nfunction onReceiveMsg(message) {\r\n  let exitSession,\r\n    sessions = store.state.sessions,\r\n    currentSession = store.state.currentSession,\r\n    users = store.state.users\r\n\r\n  if (currentSession && currentSession.loginName === message.from) {\r\n    //往当前对话窗口添加消息\r\n    let session = {}\r\n    copyProperties(session, currentSession)\r\n    session.messages.push(message)\r\n    store.state.currentSession = session\r\n    return store.state.client.read(message) //已读\r\n  }\r\n\r\n  let userFrom = findUser(message.from)\r\n\r\n  //往聊天缓存中添加消息\r\n  if (!(exitSession = findSession(message.from))) {\r\n    // 聊天记录里面没有from的session，新建from的session\r\n    exitSession = {\r\n      loginName: message.from,\r\n      img: userFrom.img,\r\n      messages: [message]\r\n    }\r\n    sessions.push(exitSession)\r\n  } else {\r\n    //from的session加入消息\r\n    exitSession.messages.push(message)\r\n  }\r\n\r\n  if (!currentSession || (currentSession && currentSession.loginName !== message.from)) {\r\n    //标记未读的数量\r\n    let user = findUser(message.from)\r\n    let index = users.indexOf(user)\r\n    if (!user.notReadMsgCount) user.notReadMsgCount = 0\r\n    user.notReadMsgCount++\r\n    users.splice(index, 1, user)\r\n\r\n    let ss = findSession(message.from)\r\n    index = sessions.indexOf(ss)\r\n    ss.notRead = user.notReadMsgCount\r\n    sessions.splice(index, 1, ss)\r\n  }\r\n}\r\n\r\nfunction onDisconnect(loginName) {\r\n  store.state.users = store.state.users.filter(item => item && item.loginName !== loginName)\r\n}\r\n\r\nfunction onNotifyUserLogin(onlineUser) {\r\n  store.commit('refreshUser', onlineUser)\r\n}\r\n\r\nfunction onKickOff({rData}) {\r\n  store.commit('logout')\r\n  alert(rData)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/frontend/js/client.js","import Vue from 'vue';\r\nimport App from './app.vue';\r\nimport store from './js/store';\r\nimport './css/reset.css'\r\n\r\nVue.config.devtools = true;\r\n\r\nnew Vue({\r\n  el: '#app',\r\n  template: '<App/>',\r\n  components: { App },\r\n  store: store\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/frontend/main.js"],"sourceRoot":""}